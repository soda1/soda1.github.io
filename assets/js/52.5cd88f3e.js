(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{412:function(t,a,v){"use strict";v.r(a);var _=v(4),r=Object(_.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h5",{attrs:{id:"数据类型如何选择"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据类型如何选择"}},[t._v("#")]),t._v(" 数据类型如何选择")]),t._v(" "),a("ul",[a("li",[t._v("更小的通常会更好，磁盘占用更少，每页能存储更多的数据。要确保没有低估需要存储值的范围，避免耗时和痛苦的操作。")]),t._v(" "),a("li",[t._v("简单就好，整数比字符串需要的CPU周期会更少")]),t._v(" "),a("li",[t._v("尽量避免NULL，大多数情况NULL是没有任何意义的，NULL的列需要更多的存储空间，当NULL的列被索引时，每个索引记录会多占一个字节。把NULL改成NOT NULL的性能提升是比较小的，更多的应该是关注业务，我们真的需要NULL来表示嘛")])]),t._v(" "),a("h6",{attrs:{id:"varchar"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#varchar"}},[t._v("#")]),t._v(" VARCHAR")]),t._v(" "),a("p",[t._v("VARCHAR字符类型节省了空间，对性能有所帮助，但需要做一些额外的工作，比如一行记录的占用空间增长了，且页内没有更多的空间了，这时候就要做一些额外的处理了")]),t._v(" "),a("p",[a("strong",[t._v("假设字符串长度超过10，VARCHAR(10)和VARCHAR(20)会一样的吗？")])]),t._v(" "),a("p",[t._v("从存储字符串的角度来看，没有什么区别。但在作查询时，如果生成了临时表，MySQL会对列使用定长的字段，因此定义成VARCHAR(20)就会比定义成VARCHAR(10)使用的内存多了")]),t._v(" "),a("h6",{attrs:{id:"如何选择时间类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何选择时间类型"}},[t._v("#")]),t._v(" 如何选择时间类型")]),t._v(" "),a("p",[t._v("通常情况下尽量选择TIMESTAMP，比DATETIME的空间效率更高，将时间存储成整数处理起来会不太方便，不推荐这么做。")]),t._v(" "),a("p",[t._v("MySQL支持的粒度到秒级，如果要更细粒度的，那就需要使用整型数据来存储了")]),t._v(" "),a("h5",{attrs:{id:"设计陷阱"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设计陷阱"}},[t._v("#")]),t._v(" 设计陷阱")]),t._v(" "),a("ol",[a("li",[t._v("列太多，服务器层将行缓冲数据解码成每个列的操作代价是非常高的。")]),t._v(" "),a("li",[t._v("太多的关联。表设计关联太多会造成解析和优化查询的代价过高")]),t._v(" "),a("li",[t._v("自我的使用NULL，空值也是一个不错的选择，除非你真的需要使用NULL")])]),t._v(" "),a("h5",{attrs:{id:"范式与反范式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#范式与反范式"}},[t._v("#")]),t._v(" 范式与反范式")]),t._v(" "),a("p",[t._v("范式的更新操作通常是比反范式化要快的，但是范式化的设计通常在查询时需要关联比较多的表，代价非常昂贵，特别是多条件查询的时候")]),t._v(" "),a("p",[t._v("反范式可以避免过多的关联表，能高效的查询数据。需要处理缓存列的更新，复杂系统可能会比较麻烦")]),t._v(" "),a("p",[t._v("范式化和反范式化在设计中都是混用的，没有绝对的范式/反范式设计")])])}),[],!1,null,null,null);a.default=r.exports}}]);