(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{357:function(s,a,e){"use strict";e.r(a);var t=e(7),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"磁盘扩容-centos7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#磁盘扩容-centos7"}},[s._v("#")]),s._v(" 磁盘扩容（centos7）")]),s._v(" "),a("h4",{attrs:{id:"lvm结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lvm结构"}},[s._v("#")]),s._v(" lvm结构")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/soda1/img/main/20210515164512.png",alt:"img"}})]),s._v(" "),a("center",[s._v(" lvm 的结构")]),s._v(" "),a("p",[s._v("在centos中，对于储存和磁盘空间的管理是lvm。 常用的 fdisk -l 命令，显示的就是物理分区。")]),s._v(" "),a("ul",[a("li",[s._v("物理卷（PV)：由物理盘割分出来的分区")]),s._v(" "),a("li",[s._v("逻辑卷组(VG)：由多个物理卷组成")]),s._v(" "),a("li",[s._v("逻辑卷(LV)：由逻辑卷组分割而成")])]),s._v(" "),a("p",[a("strong",[s._v("扩容逻辑就是将新增的物理盘切分成物理卷，然后将新增物理卷加入逻辑卷所在的逻辑卷组，最后进行逻辑卷扩容。")])]),s._v(" "),a("h4",{attrs:{id:"对根目录扩容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#对根目录扩容"}},[s._v("#")]),s._v(" 对根目录扩容")]),s._v(" "),a("h5",{attrs:{id:"创建物理分区"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建物理分区"}},[s._v("#")]),s._v(" 创建物理分区")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# /dev/sda为通过fdisk -l 查看到的物理磁盘(第一行)\nfdisk /dev/sda \n\n#进入fdisk命令行 n为创建一个新的分区\nCommand (m for help): n \n\n# 这里需要选择时创建主分区还是扩展分区，都可以，这里直接选了主分区\nPartition type:   \n   p   primary (2 primary, 0 extended, 2 free)   \n   e   extended\n# 选择创建一个主分区，主分区只能有4个，编号为1-4,下面的全部直接回车就好了，会自动将剩余所用空间都创建\nSelect (default p): p \n\nPartition number (3,4, default 3):   \nFirst sector (104857600-209715199, default 104857600): \nUsing default value 104857600\nLast sector, +sectors or +size{K,M,G} (104857600-209715199, default 209715199): \nUsing default value 209715199\nPartition 3 of type Linux and of size 50 GiB is set\n\n# t为修改分区类型 修改为lvm\nCommand (m for help): t\n# 刚才创建的分区编号为3\nPartition number (1-3, default 3): 3  \n# 8e就是 lvm格式的分区\nHex code (type L to list all codes): 8e\nChanged type of partition 'Linux' to 'Linux LVM'\n\n# w保存并写入磁盘。\nCommand (m for help): w  \nThe partition table has been altered!\n\nCalling ioctl() to re-read partition table.\n\nWARNING: Re-reading the partition table failed with error 16: Device or resource busy.\nThe kernel still uses the old table. The new table will be used at\nthe next reboot or after you run partprobe(8) or kpartx(8)\nSyncing disks.\n#报错无法读取分区信息，可以执行下面指令\npartprobe\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br")])]),a("h5",{attrs:{id:"创建物理卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建物理卷"}},[s._v("#")]),s._v(" 创建物理卷：")]),s._v(" "),a("p",[s._v("将物理分区3 创建物理卷，这里这个/dev/sda3是第一步创建的物理分区，通过fdisk -l 就可以看到是，在第一个物理磁盘/dev/sda下面的分区(一个磁盘可以有多个分区)，原本已有/dev/sda1,/dev/sda2")]),s._v(" "),a("p",[s._v("通过第一步创建生成/dev/sda3这个分区，然后将这个分区 创建成物理卷")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("将分区3创建物理卷")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("pvcreate /dev/sda3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查看物理卷")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("pvdisplay\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/soda1/img/main/20210515173418.png",alt:"image-20210515173404164"}})]),s._v(" "),a("h5",{attrs:{id:"将物理卷添加到卷组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将物理卷添加到卷组"}},[s._v("#")]),s._v(" 将物理卷添加到卷组")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("查看卷组")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("vgdisplay\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/soda1/img/main/20210515173751.png",alt:"image-20210515173719857"}})])]),s._v(" "),a("li",[a("p",[s._v("加入卷组")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vgextend centos /dev/sda3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h5",{attrs:{id:"逻辑卷进行扩容。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#逻辑卷进行扩容。"}},[s._v("#")]),s._v(" 逻辑卷进行扩容。")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("查看逻辑卷")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("lvdisplay\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/soda1/img/main/20210515174406.png",alt:"image-20210515174036139"}})])]),s._v(" "),a("li",[a("p",[s._v("将剩余百分百空间都添加到逻辑卷中")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("lvextend -l +100%FREE /dev/centos/root\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[s._v("重新识别分区大小")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("xfs_growfs /dev/centos/root\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("通过df -h就可以看到新增容量了")])])])],1)}),[],!1,null,null,null);a.default=n.exports}}]);